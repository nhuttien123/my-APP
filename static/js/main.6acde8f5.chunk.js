(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{243:function(e,t,r){"use strict";r.r(t);var n,a,c,s=r(0),i=r.n(s),o=r(28),u=r.n(o),l=r(33),j=r(22),d=r(37),m=r(27),b=r.n(m),p=r(40),O=r(59),f=r.n(O),h={getUser:function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("https://server-thelaptopworld.herokuapp.com/api/v1/tai-khoan-khach-hang/login",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createUser:function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("https://server-thelaptopworld.herokuapp.com/api/v1/tai-khoan-khach-hang",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},g=Object(j.b)("user/getUser",function(){var e=Object(p.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.getUser(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(j.c)({name:"user",initialState:{data:[],loading:null,error:null},reducers:{},extraReducers:(n={},Object(d.a)(n,g.pending,(function(e,t){e.data=[],e.loading=!0})),Object(d.a)(n,g.fulfilled,(function(e,t){var r=t.payload;e.data=r,e.loading=!1,e.error=null})),Object(d.a)(n,g.rejected,(function(e,t){e.loading=!1,e.error=t.error})),n)}).reducer,y={getProduct:function(){var e=Object(p.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.name,n=t.page,void 0!=r){e.next=7;break}return e.next=4,f.a.get("https://619b19fb27827600174453c2.mockapi.io/products?filter=&page=".concat(n,"&limit=6")).then((function(e){return e.data}));case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,f.a.get("https://619b19fb27827600174453c2.mockapi.io/products?filter=".concat(r,"&page=").concat(n,"&limit=6")).then((function(e){return e.data}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=Object(j.b)("product/getProduct",function(){var e=Object(p.a)(b.a.mark((function e(t){var r,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.name,n=t.page,e.next=3,y.getProduct({name:r,page:n});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),w=Object(j.c)({name:"product",initialState:{data:[],loading:null,error:null},reducers:{},extraReducers:(a={},Object(d.a)(a,v.pending,(function(e,t){e.loading=!0})),Object(d.a)(a,v.fulfilled,(function(e,t){e.data=t.payload,e.loading=!1,e.error=null})),Object(d.a)(a,v.rejected,(function(e,t){e.loading=!1,e.error=t.error})),a)}).reducer,I=Object(j.b)("create_user/createUser",function(){var e=Object(p.a)(b.a.mark((function e(t,r){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.createUser(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),k={products:w,userLogin:x,userRegister:Object(j.c)({name:"create_user",initialState:{response:null,loading:null,error:null},reducers:{},extraReducers:(c={},Object(d.a)(c,I.pending,(function(e,t){e.response=null,e.loading=!0})),Object(d.a)(c,I.fulfilled,(function(e,t){var r=t.payload;console.log(r),e.response=r,e.loading=!1,e.error=null})),Object(d.a)(c,I.rejected,(function(e,t){e.loading=!1,e.error=t.error})),c)}).reducer},S=Object(j.a)({reducer:k}),C=r(135),P=r(34),N=r(13),L=r(245),T=r(252),q=r(255),U=r(251),R=r(253),E=r(39),F=r(256),J=r(257),z=r(258),_=r(6);var K=function(e){var t=e.count,r=L.a.Header,n=Object(_.jsx)(T.a,{children:Object(_.jsx)(T.a.Item,{icon:Object(_.jsx)(F.a,{}),onClick:function(){localStorage.removeItem("accessKey"),sessionStorage.removeItem("cartItem"),window.location.replace("/my-app/")},children:Object(_.jsx)(q.b,{align:"center",children:" Log-out"})},"3")});return Object(s.useEffect)((function(){}),[]),Object(_.jsx)(r,{style:{zIndex:1,width:"100%"},children:Object(_.jsxs)(T.a,{theme:"dark",mode:"horizontal",children:[Object(_.jsx)(T.a.Item,{style:{fontSize:"1.1rem"},children:Object(_.jsx)(E.b,{to:"/my-app/",children:"Home"})},"1"),Object(_.jsx)(T.a.Item,{icon:Object(_.jsx)(J.a,{style:{fontSize:"1.1rem"}}),children:Object(_.jsx)(E.b,{to:"/my-app/cart",children:Object(_.jsx)(U.a,{count:t,children:Object(_.jsx)("span",{style:{color:"white"},children:"Cart"})})})},"2"),Object(_.jsx)(R.a,{overlay:n,placement:"bottomRight",arrow:!0,children:Object(_.jsx)(T.a.Item,{icon:Object(_.jsx)(z.a,{style:{fontSize:"1.1rem"}}),children:localStorage.accessKey},"3")})]})})},A=(r(236),r(62)),H=r(42),V=r(247),B=r(249),D=r(61),G=r(254),M=r(44);var Q=function(){var e=Object(l.b)(),t=Object(l.c)((function(e){return e.userLogin})),r=t.data,n=t.loading,a=r.status;Object(s.useEffect)((function(){if(a)if("success"===a){var e=r.response;localStorage.setItem("accessKey",[e.useName]),M.b.success("Login success !"),setTimeout((function(){window.location.replace("/my-app/")}),1500)}else"wrong-pass"===a?M.b.error("Password incorrect"):"not-found"===a&&M.b.error("Username incorrect")}),[a,r.response,e]);var c=JSON.parse(localStorage.getItem("rememberToken"));return Object(_.jsx)(A.a,{justify:"center",style:{paddingTop:"5rem"},children:Object(_.jsxs)(H.a,{span:8,children:[Object(_.jsx)("h1",{style:{textAlign:"center"},children:"Login"}),Object(_.jsxs)(V.a,{name:"basic",layout:"vertical",initialValues:{remember:!0},onFinish:function(t){if(Object(j.d)(e(g({Username:t.username,Password:t.password}))),1==t.remember){var r={name:t.username,pass:t.password};localStorage.setItem("rememberToken",JSON.stringify(r))}else localStorage.removeItem("rememberToken")},autoComplete:"off",children:[Object(_.jsx)(V.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],initialValue:c?c.name:"",children:Object(_.jsx)(B.a,{})}),Object(_.jsx)(V.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],initialValue:c?c.pass:"",children:Object(_.jsx)(B.a.Password,{})}),Object(_.jsxs)(V.a.Item,{children:[n?Object(_.jsx)(D.a,{type:"primary",htmlType:"submit",disabled:!0,loading:!0,children:"Checking"}):Object(_.jsx)(D.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(_.jsx)(E.b,{to:"/my-app/register",style:{marginLeft:"1rem"},children:"Register"})]}),Object(_.jsx)(V.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(_.jsx)(G.a,{children:"Remember me"})})]})]})})};var $=function(){return Object(_.jsx)("h1",{children:"404 Error"})};var W=function(){var e=Object(l.b)(),t=Object(N.f)(),r=Object(l.c)((function(e){return e.userRegister})),n=r.response,a=r.loading;return Object(s.useEffect)((function(){n&&(console.log(typeof n),"object"===typeof n?(M.b.success("Register success !"),setTimeout((function(){t("/my-app/")}),1500)):"string"===typeof n&&M.b.error("Username already exist !"))}),[n,t]),Object(_.jsx)(A.a,{justify:"center",style:{paddingTop:"5rem"},children:Object(_.jsxs)(H.a,{span:8,children:[Object(_.jsx)("h1",{style:{textAlign:"center"},children:"Register"}),Object(_.jsxs)(V.a,{name:"basic",layout:"vertical",initialValues:{remember:!0},onFinish:function(t){t.password!=t.re_password?M.b.error("Re-password incorrect",{position:"top-center"}):Object(j.d)(e(I({TenKhachHang:t.fullname,Username:t.username,Password:t.re_password,Email:t.email,Phone:"NULL",Avatar:"NULL"})))},autoComplete:"off",children:[Object(_.jsx)(V.a.Item,{label:"Fullname",name:"fullname",rules:[{required:!0,message:"Please input your fullname!"}],children:Object(_.jsx)(B.a,{})}),Object(_.jsx)(V.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(_.jsx)(B.a,{})}),Object(_.jsx)(V.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(_.jsx)(B.a.Password,{})}),Object(_.jsx)(V.a.Item,{label:"Re_Password",name:"re_password",rules:[{required:!0,message:"Please input your re-password!"}],children:Object(_.jsx)(B.a.Password,{})}),Object(_.jsx)(V.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!",type:"email"}],children:Object(_.jsx)(B.a,{})}),Object(_.jsxs)(V.a.Item,{children:[a?Object(_.jsx)(D.a,{type:"primary",htmlType:"submit",disabled:!0,children:"Checking"}):Object(_.jsx)(D.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(_.jsx)(E.b,{to:"/my-app/",style:{marginLeft:"1rem"},children:"back"})]})]})]})})},X=r(246),Y=r(250),Z=r(248);var ee=function(e){var t=e.data,r=e.addCart,n=Z.a.Meta;return Object(l.c)((function(e){return e.products})).loading,Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(H.a,{xl:8,lg:8,md:12,sm:12,xs:24,children:Object(_.jsx)("div",{className:"site-card-border-less-wrapper",children:Object(_.jsx)(Z.a,{style:{width:"100%"},hoverable:!0,cover:Object(_.jsx)("img",{alt:"example",src:t.images,style:{width:"100%",height:"16rem"}}),actions:[Object(_.jsx)(J.a,{onClick:function(){return r(t.id)}},"setting")],children:Object(_.jsx)(n,{title:t.name,description:t.price.toLocaleString("vi-vn")+"$"})})})})})};var te=function(e,t){var r=e.addCart,n=Object(l.b)(),a=Object(N.f)(),c=Object(l.c)((function(e){return e.products})),o=c.data,u=c.loading,d=new URLSearchParams(window.location.search).get("page"),m=(Object(s.useRef)(),i.a.useState(1)),b=Object(P.a)(m,2),p=b[0],O=b[1],f=Object(s.useState)(),h=Object(P.a)(f,2),g=h[0],x=h[1];Object(s.useEffect)((function(){null==d?Object(j.d)(n(v({name:g,page:1}))):Object(j.d)(n(v({name:g,page:Number(d)})))}),[n,d,g]);var y=function(){a("/my-app?page=".concat(Number(d)-1)),Object(j.d)(n(v({name:g,page:Number(d)-1}))),d<=2&&(a("/my-app"),Object(j.d)(n(v({name:g,page:1}))))},w=function(e){a("/my-app/"),Object(j.d)(n(v({name:e,page:1}))),x(e)};return Object(_.jsx)(X.a,{spinning:u,size:"middle",style:{marginTop:"5rem"},children:Object(_.jsxs)(A.a,{gutter:[16,26],children:[Object(_.jsxs)(H.a,{xl:4,style:{margin:"0 auto",position:"relative"},children:[Object(_.jsx)("h1",{children:"Filter"}),Object(_.jsxs)(Y.a.Group,{onChange:function(e){O(e.target.value)},value:p,style:{position:"sticky",top:50},children:[Object(_.jsx)(Y.a,{value:"cat",onClick:function(){return w("cat")},children:"Cat"}),Object(_.jsx)(Y.a,{value:"dog",onClick:function(){return w("dog")},children:"Dog"})]})]}),Object(_.jsxs)(H.a,{xl:20,children:[Object(_.jsxs)("div",{style:{margin:"0 auto",width:"10rem",display:"block",marginBottom:"1rem"},children:[d?Object(_.jsx)(D.a,{onClick:y,children:"Prev"}):Object(_.jsx)(D.a,{onClick:y,disabled:!0,children:"Prev"}),Object(_.jsx)(D.a,{onClick:function(){d?(a("/my-app?page=".concat(Number(d)+1)),Object(j.d)(n(v({name:g,page:Number(d)+1})))):(a("/my-app?page=2"),Object(j.d)(n(v({name:g,page:2}))))},children:"Next"})]}),Object(_.jsx)(A.a,{gutter:[16,16],children:(o||[]).map((function(e){return Object(_.jsx)(ee,{data:e,addCart:r},e.id)}))})]})]})})};var re=function(e){var t=e.removeCartItem,r=e.plus,n=e.minus,a=Object(s.useState)([]),c=Object(P.a)(a,2),i=c[0],o=c[1];Object(s.useEffect)((function(){u()}),[]);var u=function(){var e=JSON.parse(sessionStorage.getItem("cartItem"));e&&o(e)},l=function(e){n(e),u()};return Object(_.jsx)("div",{style:{display:"flex"},children:sessionStorage.cartItem&&0!=(i||[]).length?(i||[]).map((function(e){return Object(_.jsxs)("div",{style:{marginLeft:"3rem"},children:["Id item : ",e.idItem,Object(_.jsxs)("p",{children:["Quantity: ",e.quantity]}),Object(_.jsxs)("p",{children:["Price: ",e.price*e.quantity," \u0110"]}),Object(_.jsxs)("div",{children:[1==e.quantity?Object(_.jsx)("button",{onClick:function(){return l(e.idItem)},disabled:!0,children:"-"}):Object(_.jsx)("button",{onClick:function(){return l(e.idItem)},children:"-"}),Object(_.jsx)("button",{onClick:function(){return t=e.idItem,r(t),void u();var t},children:"+"}),Object(_.jsx)("button",{onClick:function(){return r=e.idItem,t(r),void u();var r},children:"x"})]})]},e.idItem)})):Object(_.jsx)("h1",{children:"No item"})})};r(242);var ne=function(e){var t=L.a.Content,r=window.location.pathname.split("/"),n=localStorage.getItem("accessKey"),a=Object(s.useState)([]),c=Object(P.a)(a,2),i=c[0],o=c[1];Object(s.useEffect)((function(){l()}));var u=JSON.parse(sessionStorage.getItem("cartItem")),l=function(){if(u){var e=[];u.map((function(t){return e.push(t.quantity)}));var t=e.reduce((function(e,t){return e+t}));o(t)}};return n?Object(_.jsxs)("div",{children:["login"===r[1]?null:Object(_.jsx)(K,{count:i}),Object(_.jsx)(t,{className:"site-layout",style:{padding:"0 50px",marginTop:20},children:Object(_.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:380},children:Object(_.jsxs)(N.c,{children:[Object(_.jsx)(N.a,{path:"/my-app/",element:Object(_.jsx)(te,{addCart:function(e,t){var r={idItem:e,quantity:1,price:t};if(null!=u){var n=u.find((function(t){return t.idItem==e}));n?n.quantity+=1:u=[].concat(Object(C.a)(u),[r])}else u=[r];sessionStorage.setItem("cartItem",JSON.stringify(u)),l()}})}),Object(_.jsx)(N.a,{path:"/my-app/cart",element:Object(_.jsx)(re,{removeCartItem:function(e){(u||[]).map((function(t,r){(u||[]).length<=1?(sessionStorage.removeItem("cartItem"),o(0)):t.idItem==e&&(u.splice(r,1),sessionStorage.setItem("cartItem",JSON.stringify(u)),l())}))},plus:function(e){(u||[]).map((function(t){t.idItem==e&&(t.quantity++,sessionStorage.setItem("cartItem",JSON.stringify(u)),l())}))},minus:function(e){(u||[]).map((function(t,r){t.idItem==e&&(t.quantity--,sessionStorage.setItem("cartItem",JSON.stringify(u)),l())}))}})}),Object(_.jsx)(N.a,{path:"*",element:Object(_.jsx)($,{})})]})})})]}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(M.a,{position:"top-center"}),Object(_.jsxs)(N.c,{children:[Object(_.jsx)(N.a,{path:"/my-app/",element:Object(_.jsx)(Q,{})}),Object(_.jsx)(N.a,{path:"/my-app/register",element:Object(_.jsx)(W,{})}),Object(_.jsx)(N.a,{path:"*",element:Object(_.jsx)($,{})})]})]})};var ae=function(){return Object(_.jsx)(E.a,{children:Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(ne,{})})})},ce=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,259)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};u.a.render(Object(_.jsx)(l.a,{store:S,children:Object(_.jsx)(ae,{})}),document.getElementById("root")),ce()}},[[243,1,2]]]);
//# sourceMappingURL=main.6acde8f5.chunk.js.map