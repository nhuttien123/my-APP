(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{233:function(e,t,r){"use strict";r.r(t);var n,a,c,s=r(0),i=r(26),o=r.n(i),u=r(38),l=r(23),j=r(30),d=r(24),m=r.n(d),b=r(32),p=r(59),f=r.n(p),O={getUser:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("https://server-thelaptopworld.herokuapp.com/api/v1/tai-khoan-khach-hang/login",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createUser:function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.post("https://server-thelaptopworld.herokuapp.com/api/v1/tai-khoan-khach-hang",t).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},h=Object(l.b)("user/getUser",function(){var e=Object(b.a)(m.a.mark((function e(t){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.getUser(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),x=Object(l.c)({name:"user",initialState:{data:[],loading:null,error:null},reducers:{},extraReducers:(n={},Object(j.a)(n,h.pending,(function(e,t){e.data=[],e.loading=!0})),Object(j.a)(n,h.fulfilled,(function(e,t){var r=t.payload;e.data=r,e.loading=!1,e.error=null})),Object(j.a)(n,h.rejected,(function(e,t){e.loading=!1,e.error=t.error})),n)}).reducer,g={getProduct:function(){var e=Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f.a.get("".concat("https://fakestoreapi.com","/products")).then((function(e){return e.data}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},y=Object(l.b)("product/getProduct",Object(b.a)(m.a.mark((function e(){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g.getProduct();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))),v=Object(l.c)({name:"product",initialState:{data:[],loading:null,error:null},reducers:{},extraReducers:(a={},Object(j.a)(a,y.pending,(function(e,t){e.loading=!0})),Object(j.a)(a,y.fulfilled,(function(e,t){e.data=t.payload,e.loading=!1,e.error=null})),Object(j.a)(a,y.rejected,(function(e,t){e.loading=!1,e.error=t.error})),a)}).reducer,I=Object(l.b)("create_user/createUser",function(){var e=Object(b.a)(m.a.mark((function e(t,r){return m.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.createUser(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()),w={products:v,userLogin:x,userRegister:Object(l.c)({name:"create_user",initialState:{response:null,loading:null,error:null},reducers:{},extraReducers:(c={},Object(j.a)(c,I.pending,(function(e,t){e.response=null,e.loading=!0})),Object(j.a)(c,I.fulfilled,(function(e,t){var r=t.payload;console.log(r),e.response=r,e.loading=!1,e.error=null})),Object(j.a)(c,I.rejected,(function(e,t){e.loading=!1,e.error=t.error})),c)}).reducer},S=Object(l.a)({reducer:w}),k=r(130),P=r(39),C=r(10),N=r(236),q=r(242),L=r(245),T=r(241),U=r(244),R=r(36),E=r(246),J=r(247),F=r(248),_=r(6);var z=function(e){var t=e.count,r=N.a.Header,n=Object(_.jsx)(q.a,{children:Object(_.jsx)(q.a.Item,{icon:Object(_.jsx)(E.a,{}),onClick:function(){localStorage.removeItem("accessKey"),sessionStorage.removeItem("cartItem"),window.location.replace("/my-app/")},children:Object(_.jsx)(L.b,{align:"center",children:" Log-out"})},"3")});return Object(s.useEffect)((function(){}),[]),Object(_.jsx)(r,{style:{zIndex:1,width:"100%"},children:Object(_.jsxs)(q.a,{theme:"dark",mode:"horizontal",children:[Object(_.jsx)(q.a.Item,{style:{fontSize:"1.1rem"},children:Object(_.jsx)(R.b,{to:"/my-app/",children:"Home"})},"1"),Object(_.jsx)(q.a.Item,{icon:Object(_.jsx)(J.a,{style:{fontSize:"1.1rem"}}),children:Object(_.jsx)(R.b,{to:"/my-app/cart",children:Object(_.jsx)(T.a,{count:t,children:Object(_.jsx)("span",{style:{color:"white"},children:"Cart"})})})},"2"),Object(_.jsx)(U.a,{overlay:n,placement:"bottomRight",arrow:!0,children:Object(_.jsx)(q.a.Item,{icon:Object(_.jsx)(F.a,{style:{fontSize:"1.1rem"}}),children:localStorage.accessKey},"3")})]})})},K=(r(231),r(237)),A=r(238),H=r(239),V=r(240),B=r(58),D=r(243),Q=r(40);var G=function(){var e=Object(u.b)(),t=Object(u.c)((function(e){return e.userLogin})),r=t.data,n=t.loading,a=r.status;Object(s.useEffect)((function(){if(a)if("success"===a){var e=r.response;localStorage.setItem("accessKey",[e.useName]),Q.b.success("Login success !"),setTimeout((function(){window.location.replace("/my-app/")}),1500)}else"wrong-pass"===a?Q.b.error("Password incorrect"):"not-found"===a&&Q.b.error("Username incorrect")}),[a,r.response,e]);var c=JSON.parse(localStorage.getItem("rememberToken"));return Object(_.jsx)(K.a,{justify:"center",style:{paddingTop:"5rem"},children:Object(_.jsxs)(A.a,{span:8,children:[Object(_.jsx)("h1",{style:{textAlign:"center"},children:"Login"}),Object(_.jsxs)(H.a,{name:"basic",layout:"vertical",initialValues:{remember:!0},onFinish:function(t){if(Object(l.d)(e(h({Username:t.username,Password:t.password}))),1==t.remember){var r={name:t.username,pass:t.password};localStorage.setItem("rememberToken",JSON.stringify(r))}else localStorage.removeItem("rememberToken")},autoComplete:"off",children:[Object(_.jsx)(H.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],initialValue:c?c.name:"",children:Object(_.jsx)(V.a,{})}),Object(_.jsx)(H.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],initialValue:c?c.pass:"",children:Object(_.jsx)(V.a.Password,{})}),Object(_.jsxs)(H.a.Item,{children:[n?Object(_.jsx)(B.a,{type:"primary",htmlType:"submit",disabled:!0,loading:!0,children:"Checking"}):Object(_.jsx)(B.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(_.jsx)(R.b,{to:"/my-app/register",style:{marginLeft:"1rem"},children:"Register"})]}),Object(_.jsx)(H.a.Item,{name:"remember",valuePropName:"checked",wrapperCol:{offset:8,span:16},children:Object(_.jsx)(D.a,{children:"Remember me"})})]})]})})};var M=function(){return Object(_.jsx)("h1",{children:"404 Error"})};var W=function(){var e=Object(u.b)(),t=Object(C.f)(),r=Object(u.c)((function(e){return e.userRegister})),n=r.response,a=r.loading;return Object(s.useEffect)((function(){n&&(console.log(typeof n),"object"===typeof n?(Q.b.success("Register success !"),setTimeout((function(){t("/my-app/")}),1500)):"string"===typeof n&&Q.b.error("Username already exist !"))}),[n,t]),Object(_.jsx)(K.a,{justify:"center",style:{paddingTop:"5rem"},children:Object(_.jsxs)(A.a,{span:8,children:[Object(_.jsx)("h1",{style:{textAlign:"center"},children:"Register"}),Object(_.jsxs)(H.a,{name:"basic",layout:"vertical",initialValues:{remember:!0},onFinish:function(t){t.password!=t.re_password?Q.b.error("Re-password incorrect",{position:"top-center"}):Object(l.d)(e(I({TenKhachHang:t.fullname,Username:t.username,Password:t.re_password,Email:t.email,Phone:"NULL",Avatar:"NULL"})))},autoComplete:"off",children:[Object(_.jsx)(H.a.Item,{label:"Fullname",name:"fullname",rules:[{required:!0,message:"Please input your fullname!"}],children:Object(_.jsx)(V.a,{})}),Object(_.jsx)(H.a.Item,{label:"Username",name:"username",rules:[{required:!0,message:"Please input your username!"}],children:Object(_.jsx)(V.a,{})}),Object(_.jsx)(H.a.Item,{label:"Password",name:"password",rules:[{required:!0,message:"Please input your password!"}],children:Object(_.jsx)(V.a.Password,{})}),Object(_.jsx)(H.a.Item,{label:"Re_Password",name:"re_password",rules:[{required:!0,message:"Please input your re-password!"}],children:Object(_.jsx)(V.a.Password,{})}),Object(_.jsx)(H.a.Item,{label:"Email",name:"email",rules:[{required:!0,message:"Please input your email!",type:"email"}],children:Object(_.jsx)(V.a,{})}),Object(_.jsxs)(H.a.Item,{children:[a?Object(_.jsx)(B.a,{type:"primary",htmlType:"submit",disabled:!0,children:"Checking"}):Object(_.jsx)(B.a,{type:"primary",htmlType:"submit",children:"Submit"}),Object(_.jsx)(R.b,{to:"/",style:{marginLeft:"1rem"},children:"back"})]})]})]})})};var X=function(e){var t=e.addCart,r=Object(u.b)();return Object(s.useEffect)((function(){Object(l.d)(r(y()))}),[r]),Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("button",{onClick:function(){return t(1,200)},children:"add cart 1"}),Object(_.jsx)("button",{style:{marginLeft:"2rem"},onClick:function(){return t(2,500)},children:"add cart 2"})]})};var Y=function(e){var t=e.removeCartItem,r=e.plus,n=e.minus,a=Object(s.useState)([]),c=Object(P.a)(a,2),i=c[0],o=c[1];Object(s.useEffect)((function(){u()}),[]);var u=function(){var e=JSON.parse(sessionStorage.getItem("cartItem"));e&&o(e)},l=function(e){n(e),u()};return Object(_.jsx)("div",{style:{display:"flex"},children:sessionStorage.cartItem&&0!=(i||[]).length?(i||[]).map((function(e){return Object(_.jsxs)("div",{style:{marginLeft:"3rem"},children:["Id item : ",e.idItem,Object(_.jsxs)("p",{children:["Quantity: ",e.quantity]}),Object(_.jsxs)("p",{children:["Price: ",e.price*e.quantity," \u0110"]}),Object(_.jsxs)("div",{children:[1==e.quantity?Object(_.jsx)("button",{onClick:function(){return l(e.idItem)},disabled:!0,children:"-"}):Object(_.jsx)("button",{onClick:function(){return l(e.idItem)},children:"-"}),Object(_.jsx)("button",{onClick:function(){return t=e.idItem,r(t),void u();var t},children:"+"}),Object(_.jsx)("button",{onClick:function(){return r=e.idItem,t(r),void u();var r},children:"x"})]})]},e.idItem)})):Object(_.jsx)("h1",{children:"No item"})})};r(232);var Z=function(e){var t=N.a.Content,r=window.location.pathname.split("/"),n=localStorage.getItem("accessKey"),a=Object(s.useState)([]),c=Object(P.a)(a,2),i=c[0],o=c[1];Object(s.useEffect)((function(){l()}));var u=JSON.parse(sessionStorage.getItem("cartItem")),l=function(){if(u){var e=[];u.map((function(t){return e.push(t.quantity)}));var t=e.reduce((function(e,t){return e+t}));o(t)}};return n?Object(_.jsxs)("div",{children:["login"===r[1]?null:Object(_.jsx)(z,{count:i}),Object(_.jsx)(t,{className:"site-layout",style:{padding:"0 50px",marginTop:20},children:Object(_.jsx)("div",{className:"site-layout-background",style:{padding:24,minHeight:380},children:Object(_.jsxs)(C.c,{children:[Object(_.jsx)(C.a,{path:"/my-app/",element:Object(_.jsx)(X,{addCart:function(e,t){var r={idItem:e,quantity:1,price:t};if(null!=u){var n=u.find((function(t){return t.idItem==e}));n?n.quantity+=1:u=[].concat(Object(k.a)(u),[r])}else u=[r];sessionStorage.setItem("cartItem",JSON.stringify(u)),l()}})}),Object(_.jsx)(C.a,{path:"/my-app/cart",element:Object(_.jsx)(Y,{removeCartItem:function(e){(u||[]).map((function(t,r){(u||[]).length<=1?(sessionStorage.removeItem("cartItem"),o(0)):t.idItem==e&&(u.splice(r,1),sessionStorage.setItem("cartItem",JSON.stringify(u)),l())}))},plus:function(e){(u||[]).map((function(t){t.idItem==e&&(t.quantity++,sessionStorage.setItem("cartItem",JSON.stringify(u)),l())}))},minus:function(e){(u||[]).map((function(t,r){t.idItem==e&&(t.quantity--,sessionStorage.setItem("cartItem",JSON.stringify(u)),l())}))}})}),Object(_.jsx)(C.a,{path:"*",element:Object(_.jsx)(M,{})})]})})})]}):Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Q.a,{position:"top-center"}),Object(_.jsxs)(C.c,{children:[Object(_.jsx)(C.a,{path:"/my-app/",element:Object(_.jsx)(G,{})}),Object(_.jsx)(C.a,{path:"/my-app/register",element:Object(_.jsx)(W,{})}),Object(_.jsx)(C.a,{path:"*",element:Object(_.jsx)(M,{})})]})]})};var $=function(){return Object(_.jsx)(R.a,{children:Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(Z,{})})})},ee=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,249)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,c=t.getLCP,s=t.getTTFB;r(e),n(e),a(e),c(e),s(e)}))};o.a.render(Object(_.jsx)(u.a,{store:S,children:Object(_.jsx)($,{})}),document.getElementById("root")),ee()}},[[233,1,2]]]);
//# sourceMappingURL=main.431436a6.chunk.js.map